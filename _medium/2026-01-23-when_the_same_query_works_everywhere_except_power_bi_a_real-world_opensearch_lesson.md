---
layout: default
title: "When the Same Query Works Everywhere Except Power BI: A Real-World OpenSearch Lesson"
date: Fri, 23 Jan 2026 06:22:46 +0000
excerpt: "This week I ran into a subtle "
link: "https://medium.com/@shiki65536/when-the-same-query-works-everywhere-except-power-bi-a-real-world-opensearch-lesson-ecb6a131051c?source=rss-374d8f1302a3------2"
image: "https://cdn-images-1.medium.com/max/800/1*alzwqfTS1ff0ioZ2-hzMrw.jpeg"
tags: ["power-bi", "opensearch", "pagination", "data-engineering", "troubleshooting"]
---
This week I ran into a subtle but valuable lesson while helping investigate a reporting issue involving OpenSearch, Power BI, and a large rollover index.At first glance, it looked like a ODBC or permission problem.In reality, it turned out to be a difference in how tools retrieve data, and a single OpenSearch setting made all the difference.The SymptomA half year querying OpenSearch only returned data up to Aug 2025.The same query worked fine in:OpenSearch DashboardsDev ToolsNew RelicEngineers could clearly see data well beyond that date (into 2026)So the natural questions were:Is ingestion broken?Did the index stop updating?Is this a permissions issue?What Changed Behind the ScenesAround mid-Aug 2025, the OpenSearch cluster went through a large-scale recovery and reindexing:A very large index hit shard document limitsThe index was reindexed and rolled over into multiple physical indices.An alias pointed to these indicesFrom a logical query perspective, nothing changed.From a data retrieval perspective, a lot changed.The Key Insight: Same Query ≠ Same ExecutionAlthough everyone was “running the same query”, different tools execute it very differently.OpenSearch Dashboards / Dev Tools / New RelicThese tools typically use:Cursor-based fetchingScroll / search_afterBatched retrievalThis avoids deep pagination and works well with very large datasets.Power BI (via ODBC / connector)Power BI often:Uses from + size paginationTries to pull very large result sets in one go (especially for previews or imports)Silently fails or returns empty results if limits are hitAnd that leads to the crucial OpenSearch setting.The Real Root Cause: index.max_result_windowOpenSearch has a safeguard called: index.max_result_windowDefault value is usually 10,000It limits how deep from + size pagination can goIt does not affect scroll or cursor-based queriesPower BI was hitting this limit on the newer rollover indices (-000002, -000003).Engineers never saw the issue because:Their tools didn’t use deep paginationErrors were surfaced clearly (or never triggered)Power BI, on the other hand, effectively looked like it was “missing data”.The FixOnce an engineer updated the rollover indices:{  &quot;index.max_result_window&quot;: 1000000}Power BI immediately started returning the expected data.No permission changes.No reindexing.No data loss.Just a pagination limit.Take AwayThis was a great reminder that:BI tools are not just SQL clientsThe same logical query can hit very different execution pathsData platforms need to account for how downstream tools actually fetch dataThe same query does not guarantee the same execution. Different tools retrieve data in different ways.
